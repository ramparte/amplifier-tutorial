<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Modules - Amplifier Tutorial</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Modules";
        var mkdocs_page_input_path = "concepts/modules.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Amplifier Tutorial
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/what-is-amplifier.html">What is Amplifier?</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/how-its-different.html">How It's Different</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/installation.html">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/first-conversation.html">Your First Conversation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/key-commands.html">Key Commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/first-bundle.html">Your First Bundle</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Core Concepts</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture Deep Dive</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="modules.html">Modules</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#what-is-a-module">What is a Module?</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#the-module-philosophy">The Module Philosophy</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#the-5-module-types">The 5 Module Types</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#provider-modules">Provider Modules</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tool-modules">Tool Modules</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#orchestrator-modules">Orchestrator Modules</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#context-modules">Context Modules</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#hook-modules">Hook Modules</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tool-vs-hook">Tool vs Hook</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#when-to-use-tools">When to Use Tools</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#when-to-use-hooks">When to Use Hooks</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#the-decision-tree">The Decision Tree</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#module-composition">Module Composition</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#adding-new-capabilities">Adding New Capabilities</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#swapping-implementations">Swapping Implementations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#module-contracts">Module Contracts</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#the-contract-principle">The Contract Principle</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#key-takeaways">Key Takeaways</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#whats-next">What's Next?</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="bundles.html">Bundles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="agents.html">Agents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="recipes.html">Recipes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="skills.html">Skills</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="hooks.html">Hooks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/filesystem.html">Filesystem</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/bash.html">Bash</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/search.html">Search (grep & glob)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/web.html">Web Tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/task.html">Task (Sub-Agents)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/lsp.html">LSP (Code Intelligence)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/recipes-tool.html">Recipes Tool</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Bundles Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../bundles/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bundles/foundation.html">Foundation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bundles/recipes.html">Recipes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bundles/lsp-python.html">LSP Python</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bundles/design-intelligence.html">Design Intelligence</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Skills Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../skills/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skills/playwright.html">Playwright</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skills/curl.html">Curl</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skills/image-vision.html">Image Vision</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer Setup</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-setup/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-setup/cli-tools.html">CLI Tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-setup/shadow-workspace.html">Shadow Workspace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-setup/remote-dev.html">Remote Development</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-setup/debugging.html">Debugging</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../advanced/custom-bundle.html">Custom Bundles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../advanced/custom-tool.html">Custom Tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../advanced/custom-recipe.html">Custom Recipes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../advanced/mcp-integration.html">MCP Integration</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Amplifier Tutorial</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Core Concepts</li>
      <li class="breadcrumb-item active">Modules</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="understanding-modules">Understanding Modules<a class="headerlink" href="#understanding-modules" title="Permanent link">&para;</a></h1>
<p>Modules are the fundamental building blocks of Amplifier. They represent the "bricks and studs" philosophy—self-contained units with standardized interfaces that snap together to create powerful AI applications. Understanding modules is essential to mastering Amplifier's architecture.</p>
<h2 id="what-is-a-module">What is a Module?<a class="headerlink" href="#what-is-a-module" title="Permanent link">&para;</a></h2>
<p>A module is a <strong>self-contained unit of functionality</strong> that:</p>
<ul>
<li>Has a <strong>single, well-defined purpose</strong></li>
<li>Implements a <strong>specific contract</strong> (interface)</li>
<li>Can be <strong>swapped, upgraded, or replaced</strong> without affecting others</li>
<li>Operates <strong>independently</strong> while integrating seamlessly</li>
</ul>
<p>Think of modules like LEGO bricks. Each brick has a specific shape and purpose, but they all share the same connection system (studs and sockets). You can build anything by combining bricks, and you can always swap one brick for another of the same type.</p>
<h3 id="the-module-philosophy">The Module Philosophy<a class="headerlink" href="#the-module-philosophy" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>┌─────────────────────────────────────────────────────────────┐
│                     YOUR APPLICATION                        │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │
│  │Provider │  │  Tool   │  │ Context │  │  Hook   │        │
│  │ Module  │  │ Module  │  │ Module  │  │ Module  │        │
│  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘        │
│       │            │            │            │              │
│       └────────────┴─────┬──────┴────────────┘              │
│                          │                                  │
│                   ┌──────┴──────┐                           │
│                   │Orchestrator │                           │
│                   │   Module    │                           │
│                   └─────────────┘                           │
└─────────────────────────────────────────────────────────────┘
</code></pre></div>

<p>Modules communicate through <strong>contracts</strong>, not implementations. This means:</p>
<ul>
<li>A Claude provider and an OpenAI provider are interchangeable</li>
<li>A filesystem tool and a database tool both implement the same tool contract</li>
<li>You can add observability hooks without changing any other code</li>
</ul>
<h2 id="the-5-module-types">The 5 Module Types<a class="headerlink" href="#the-5-module-types" title="Permanent link">&para;</a></h2>
<p>Amplifier defines exactly five module types. Each has a specific role and contract:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Purpose</th>
<th>Contract</th>
<th>When It Runs</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Provider</strong></td>
<td>LLM backends</td>
<td><code>complete()</code></td>
<td>When AI response needed</td>
</tr>
<tr>
<td><strong>Tool</strong></td>
<td>Agent capabilities</td>
<td><code>execute()</code></td>
<td>When LLM requests action</td>
</tr>
<tr>
<td><strong>Orchestrator</strong></td>
<td>Main engine</td>
<td>The agent loop</td>
<td>Continuously during session</td>
</tr>
<tr>
<td><strong>Context</strong></td>
<td>Memory &amp; state</td>
<td><code>messages</code></td>
<td>Before each LLM call</td>
</tr>
<tr>
<td><strong>Hook</strong></td>
<td>Observers</td>
<td><code>events</code></td>
<td>On system events</td>
</tr>
</tbody>
</table>
<h3 id="provider-modules">Provider Modules<a class="headerlink" href="#provider-modules" title="Permanent link">&para;</a></h3>
<p>Providers connect Amplifier to language models. They abstract away the differences between OpenAI, Anthropic, Azure, local models, and others.</p>
<p><strong>Contract:</strong> <code>complete(messages, tools, config) -&gt; response</code></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># All providers implement the same interface</span>
<span class="k">class</span> <span class="nc">Provider</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">complete</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">messages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">],</span>
        <span class="n">tools</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Tool</span><span class="p">],</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">CompletionConfig</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CompletionResponse</span><span class="p">:</span>
        <span class="o">...</span>
</code></pre></div>

<p><strong>Key characteristics:</strong>
- Handle authentication and API specifics internally
- Normalize responses to a common format
- Support streaming where available
- Manage rate limiting and retries</p>
<p><strong>Examples:</strong> <code>AnthropicProvider</code>, <code>OpenAIProvider</code>, <code>AzureProvider</code>, <code>OllamaProvider</code></p>
<h3 id="tool-modules">Tool Modules<a class="headerlink" href="#tool-modules" title="Permanent link">&para;</a></h3>
<p>Tools give agents the ability to act in the world. They represent capabilities the LLM can invoke to accomplish tasks.</p>
<p><strong>Contract:</strong> <code>execute(arguments) -&gt; result</code></p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Tool</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">JSONSchema</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arguments</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolResult</span><span class="p">:</span>
        <span class="o">...</span>
</code></pre></div>

<p><strong>Key characteristics:</strong>
- Self-describing (name, description, parameters)
- Executed when the LLM decides to use them
- Return structured results back to the conversation
- Can be dynamically enabled/disabled</p>
<p><strong>Examples:</strong> <code>read_file</code>, <code>write_file</code>, <code>bash</code>, <code>web_search</code>, <code>grep</code></p>
<h3 id="orchestrator-modules">Orchestrator Modules<a class="headerlink" href="#orchestrator-modules" title="Permanent link">&para;</a></h3>
<p>The orchestrator is the brain of the agent. It runs the main loop: getting context, calling the LLM, executing tools, and repeating.</p>
<p><strong>Contract:</strong> The agent loop itself</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Orchestrator</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="n">Session</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">done</span><span class="p">:</span>
            <span class="c1"># 1. Gather context</span>
            <span class="n">messages</span> <span class="o">=</span> <span class="k">await</span> <span class="n">context</span><span class="o">.</span><span class="n">get_messages</span><span class="p">()</span>

            <span class="c1"># 2. Call LLM</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">provider</span><span class="o">.</span><span class="n">complete</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">)</span>

            <span class="c1"># 3. Process response</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">has_tool_calls</span><span class="p">:</span>
                <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">execute_tools</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">tool_calls</span><span class="p">)</span>

            <span class="c1"># 4. Check completion</span>
            <span class="n">done</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">is_final</span>
</code></pre></div>

<p><strong>Key characteristics:</strong>
- Controls the agent's decision-making flow
- Manages turn-taking between user and agent
- Coordinates all other module types
- Handles completion conditions</p>
<p><strong>Examples:</strong> <code>StandardOrchestrator</code>, <code>ReActOrchestrator</code>, <code>PlanningOrchestrator</code></p>
<h3 id="context-modules">Context Modules<a class="headerlink" href="#context-modules" title="Permanent link">&para;</a></h3>
<p>Context modules manage what the agent "knows" during a conversation. They build the message history and inject relevant information.</p>
<p><strong>Contract:</strong> <code>messages</code> - provides the conversation context</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Context</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_messages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="n">Session</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Message</span><span class="p">]:</span>
        <span class="o">...</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">add_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>
</code></pre></div>

<p><strong>Key characteristics:</strong>
- Maintain conversation history
- Inject system prompts and instructions
- Can add retrieved documents (RAG)
- Handle context window limits</p>
<p><strong>Examples:</strong> <code>ConversationContext</code>, <code>SlidingWindowContext</code>, <code>RAGContext</code></p>
<h3 id="hook-modules">Hook Modules<a class="headerlink" href="#hook-modules" title="Permanent link">&para;</a></h3>
<p>Hooks observe and react to system events without modifying the core flow. They're perfect for logging, analytics, guardrails, and side effects.</p>
<p><strong>Contract:</strong> <code>events</code> - receives notifications</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Hook</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Event</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>
</code></pre></div>

<p><strong>Key characteristics:</strong>
- Passive observers (don't change main flow)
- Subscribe to specific event types
- Run asynchronously when events occur
- Can emit their own events</p>
<p><strong>Examples:</strong> <code>LoggingHook</code>, <code>MetricsHook</code>, <code>GuardrailHook</code>, <code>AuditHook</code></p>
<h2 id="tool-vs-hook">Tool vs Hook<a class="headerlink" href="#tool-vs-hook" title="Permanent link">&para;</a></h2>
<p>This distinction confuses many newcomers. Here's the key difference:</p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Tool</th>
<th>Hook</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Triggered by</strong></td>
<td>LLM decides to use it</td>
<td>Code events fire</td>
</tr>
<tr>
<td><strong>Purpose</strong></td>
<td>Give agent capabilities</td>
<td>Observe/react to events</td>
</tr>
<tr>
<td><strong>Control flow</strong></td>
<td>Blocks until complete</td>
<td>Runs asynchronously</td>
</tr>
<tr>
<td><strong>Visibility</strong></td>
<td>LLM knows about it</td>
<td>LLM doesn't know</td>
</tr>
<tr>
<td><strong>Examples</strong></td>
<td>Read file, search web</td>
<td>Log events, track metrics</td>
</tr>
</tbody>
</table>
<h3 id="when-to-use-tools">When to Use Tools<a class="headerlink" href="#when-to-use-tools" title="Permanent link">&para;</a></h3>
<p>Use a tool when the <strong>LLM needs to decide</strong> whether to use the capability:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Tool: LLM chooses when to search</span>
<span class="nd">@tool</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">web_search</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search the web for information.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">search_engine</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</code></pre></div>

<p>The LLM sees this tool, understands its purpose, and invokes it when relevant.</p>
<h3 id="when-to-use-hooks">When to Use Hooks<a class="headerlink" href="#when-to-use-hooks" title="Permanent link">&para;</a></h3>
<p>Use a hook when you want to <strong>observe without the LLM knowing</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Hook: Automatically logs all tool calls</span>
<span class="k">class</span> <span class="nc">ToolLoggingHook</span><span class="p">(</span><span class="n">Hook</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">on_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;tool_call&quot;</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool called: </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="n">tool_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<p>The LLM never knows this hook exists—it just observes silently.</p>
<h3 id="the-decision-tree">The Decision Tree<a class="headerlink" href="#the-decision-tree" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>Should the LLM decide when this runs?
    │
    ├── YES → Use a TOOL
    │         (agent capability)
    │
    └── NO → Use a HOOK
             (system observation)
</code></pre></div>

<h2 id="module-composition">Module Composition<a class="headerlink" href="#module-composition" title="Permanent link">&para;</a></h2>
<p>The power of modules comes from composition. You combine simple modules to create sophisticated behavior:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># A simple but powerful agent configuration</span>
<span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">anthropic</span>
<span class="nt">orchestrator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">standard</span>

<span class="nt">tools</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">read_file</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">write_file</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web_search</span>

<span class="nt">context</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conversation</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">system_prompt</span>

<span class="nt">hooks</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">logging</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">metrics</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">guardrails</span>
</code></pre></div>

<h3 id="adding-new-capabilities">Adding New Capabilities<a class="headerlink" href="#adding-new-capabilities" title="Permanent link">&para;</a></h3>
<p>Want to add a new capability? Just add a module:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">tools</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">read_file</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">write_file</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web_search</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database_query</span><span class="w">  </span><span class="c1"># New capability!</span>
</code></pre></div>

<h3 id="swapping-implementations">Swapping Implementations<a class="headerlink" href="#swapping-implementations" title="Permanent link">&para;</a></h3>
<p>Need to change providers? Just swap:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Before</span>
<span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openai</span>

<span class="c1"># After</span>
<span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">anthropic</span>
</code></pre></div>

<p>Everything else stays the same.</p>
<h2 id="module-contracts">Module Contracts<a class="headerlink" href="#module-contracts" title="Permanent link">&para;</a></h2>
<p>Every module type has a <strong>contract</strong>—a promise about how it behaves. Contracts enable:</p>
<ol>
<li><strong>Interchangeability</strong>: Any module implementing the contract works</li>
<li><strong>Testing</strong>: Mock modules that follow the contract</li>
<li><strong>Evolution</strong>: Improve internals without breaking interfaces</li>
</ol>
<h3 id="the-contract-principle">The Contract Principle<a class="headerlink" href="#the-contract-principle" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>┌─────────────┐         ┌─────────────┐
│  Module A   │         │  Module B   │
│             │         │             │
│ (OpenAI)    │         │ (Anthropic) │
└──────┬──────┘         └──────┬──────┘
       │                       │
       └───────────┬───────────┘
                   │
            ┌──────┴──────┐
            │  Contract   │
            │ complete()  │
            └─────────────┘
                   │
            ┌──────┴──────┐
            │   Kernel    │
            └─────────────┘
</code></pre></div>

<p>The kernel only knows about contracts, not implementations. This is what makes modules truly interchangeable.</p>
<h2 id="key-takeaways">Key Takeaways<a class="headerlink" href="#key-takeaways" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p><strong>Five module types</strong>: Provider, Tool, Orchestrator, Context, Hook—each with a specific purpose</p>
</li>
<li>
<p><strong>Contracts over implementations</strong>: Modules are interchangeable because they implement standard contracts</p>
</li>
<li>
<p><strong>Tools vs Hooks</strong>: Tools are LLM-invoked capabilities; hooks are silent observers</p>
</li>
<li>
<p><strong>Composition is key</strong>: Combine simple modules to create powerful agents</p>
</li>
<li>
<p><strong>Single responsibility</strong>: Each module does one thing well</p>
</li>
<li>
<p><strong>The LEGO principle</strong>: Standard interfaces let you build anything from simple, swappable pieces</p>
</li>
</ol>
<h2 id="whats-next">What's Next?<a class="headerlink" href="#whats-next" title="Permanent link">&para;</a></h2>
<p>Now that you understand modules, explore each type in depth:</p>
<ul>
<li><a href="./providers.md">Providers: Connecting to LLMs</a></li>
<li><a href="./tools.md">Tools: Agent Capabilities</a></li>
<li><a href="./orchestrators.md">Orchestrators: The Agent Loop</a></li>
<li><a href="./context.md">Context: Memory and State</a></li>
<li><a href="hooks.html">Hooks: Observability</a></li>
</ul>
<p>Or see modules in action:</p>
<ul>
<li><a href="../guides/first-agent.md">Building Your First Agent</a></li>
<li><a href="../guides/configuration.md">Module Configuration</a></li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="architecture.html" class="btn btn-neutral float-left" title="Architecture Deep Dive"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="bundles.html" class="btn btn-neutral float-right" title="Bundles">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="architecture.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="bundles.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
