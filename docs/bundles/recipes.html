<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Recipes - Amplifier Tutorial</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Recipes";
        var mkdocs_page_input_path = "bundles/recipes.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Amplifier Tutorial
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/what-is-amplifier.html">What is Amplifier?</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/how-its-different.html">How It's Different</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/installation.html">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/first-conversation.html">Your First Conversation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/key-commands.html">Key Commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quickstart/first-bundle.html">Your First Bundle</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Core Concepts</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../concepts/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../concepts/architecture.html">Architecture Deep Dive</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../concepts/modules.html">Modules</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../concepts/bundles.html">Bundles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../concepts/agents.html">Agents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../concepts/recipes.html">Recipes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../concepts/skills.html">Skills</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../concepts/hooks.html">Hooks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/filesystem.html">Filesystem</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/bash.html">Bash</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/search.html">Search (grep & glob)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/web.html">Web Tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/task.html">Task (Sub-Agents)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/lsp.html">LSP (Code Intelligence)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tools/recipes-tool.html">Recipes Tool</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Bundles Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="foundation.html">Foundation</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="recipes.html">Recipes</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#whats-included">What's Included</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#the-recipes-tool">The recipes Tool</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#the-recipe-author-agent">The recipe-author Agent</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#when-to-use">When to Use</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#good-use-cases">Good Use Cases</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#when-not-to-use">When Not to Use</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#recipe-anatomy">Recipe Anatomy</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#basic-structure-flat-recipe">Basic Structure (Flat Recipe)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#staged-recipe-with-approval-gates">Staged Recipe (With Approval Gates)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#key-concepts">Key Concepts</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#context-and-variable-interpolation">Context and Variable Interpolation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#error-handling">Error Handling</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#timeouts">Timeouts</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#foreach-loops">Foreach Loops</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#conditional-execution">Conditional Execution</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#working-with-sessions">Working with Sessions</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#session-lifecycle">Session Lifecycle</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#listing-and-resuming">Listing and Resuming</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#approval-workflow">Approval Workflow</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#try-it-yourself">Try It Yourself</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-1-simple-code-review-recipe">Example 1: Simple Code Review Recipe</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-2-research-and-summarize">Example 2: Research and Summarize</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-3-using-the-recipe-author">Example 3: Using the Recipe Author</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#best-practices">Best Practices</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#common-patterns">Common Patterns</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#sequential-analysis-pipeline">Sequential Analysis Pipeline</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fan-outfan-in">Fan-Out/Fan-In</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#approval-checkpoint">Approval Checkpoint</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="lsp-python.html">LSP Python</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="design-intelligence.html">Design Intelligence</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Skills Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../skills/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skills/playwright.html">Playwright</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skills/curl.html">Curl</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../skills/image-vision.html">Image Vision</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer Setup</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-setup/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-setup/cli-tools.html">CLI Tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-setup/shadow-workspace.html">Shadow Workspace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-setup/remote-dev.html">Remote Development</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-setup/debugging.html">Debugging</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../advanced/custom-bundle.html">Custom Bundles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../advanced/custom-tool.html">Custom Tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../advanced/custom-recipe.html">Custom Recipes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../advanced/mcp-integration.html">MCP Integration</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Amplifier Tutorial</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Bundles Reference</li>
      <li class="breadcrumb-item active">Recipes</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="recipes-bundle">Recipes Bundle<a class="headerlink" href="#recipes-bundle" title="Permanent link">&para;</a></h1>
<p>The Recipes Bundle provides workflow orchestration capabilities for Amplifier, enabling you to define multi-step AI agent workflows as declarative YAML specifications. Think of recipes as "playbooks" that coordinate complex, multi-step tasks with built-in state management, error handling, and human-in-the-loop approval gates.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Recipes solve a fundamental challenge in AI-assisted development: coordinating complex tasks that require multiple steps, different agent capabilities, and human oversight. Instead of manually orchestrating each step, you define the workflow once and let the recipe system handle execution, state persistence, and error recovery.</p>
<p>Key characteristics:</p>
<ul>
<li><strong>Declarative</strong>: Define what should happen, not how to execute it</li>
<li><strong>Resumable</strong>: Sessions persist state so interrupted workflows can continue</li>
<li><strong>Composable</strong>: Build complex workflows from simple, reusable steps</li>
<li><strong>Observable</strong>: Track progress and inspect state at any point</li>
<li><strong>Human-in-the-loop</strong>: Add approval gates for critical decisions</li>
</ul>
<h2 id="whats-included">What's Included<a class="headerlink" href="#whats-included" title="Permanent link">&para;</a></h2>
<h3 id="the-recipes-tool">The <code>recipes</code> Tool<a class="headerlink" href="#the-recipes-tool" title="Permanent link">&para;</a></h3>
<p>The core tool for executing and managing recipe workflows:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Execute a recipe</span>
<span class="nt">recipes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">execute</span>
<span class="w">  </span><span class="nt">recipe_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./my-recipe.yaml</span>
<span class="w">  </span><span class="nt">context</span><span class="p">:</span>
<span class="w">    </span><span class="nt">target_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">src/auth.py</span>

<span class="c1"># Resume an interrupted session</span>
<span class="nt">recipes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">resume</span>
<span class="w">  </span><span class="nt">session_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">recipe_20251118_143022_a3f2</span>

<span class="c1"># List active sessions</span>
<span class="nt">recipes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">list</span>

<span class="c1"># Validate recipe structure</span>
<span class="nt">recipes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">validate</span>
<span class="w">  </span><span class="nt">recipe_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./my-recipe.yaml</span>

<span class="c1"># Approval operations (for staged recipes)</span>
<span class="nt">recipes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">approvals</span><span class="w">  </span><span class="c1"># List pending approvals</span>

<span class="nt">recipes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">approve</span>
<span class="w">  </span><span class="nt">session_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;...&quot;</span>
<span class="w">  </span><span class="nt">stage_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;planning&quot;</span>

<span class="nt">recipes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deny</span>
<span class="w">  </span><span class="nt">session_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;...&quot;</span>
<span class="w">  </span><span class="nt">stage_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;planning&quot;</span>
<span class="w">  </span><span class="nt">reason</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;needs</span><span class="nv"> </span><span class="s">revision&quot;</span>
</code></pre></div>

<h3 id="the-recipe-author-agent">The <code>recipe-author</code> Agent<a class="headerlink" href="#the-recipe-author-agent" title="Permanent link">&para;</a></h3>
<p>A specialized agent for creating, validating, and refining recipe specifications:</p>
<ul>
<li><strong>Conversational design</strong>: Guides you through recipe creation with clarifying questions</li>
<li><strong>Schema validation</strong>: Ensures recipes conform to the specification</li>
<li><strong>Pattern guidance</strong>: Recommends best practices for workflow orchestration</li>
<li><strong>Error detection</strong>: Identifies common mistakes before execution</li>
</ul>
<h2 id="when-to-use">When to Use<a class="headerlink" href="#when-to-use" title="Permanent link">&para;</a></h2>
<h3 id="good-use-cases">Good Use Cases<a class="headerlink" href="#good-use-cases" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Why Recipes Help</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Code review workflows</strong></td>
<td>Coordinate analysis, security check, and summary steps</td>
</tr>
<tr>
<td><strong>Multi-file refactoring</strong></td>
<td>Plan changes, implement across files, validate results</td>
</tr>
<tr>
<td><strong>Release processes</strong></td>
<td>Version bump, changelog, tests, PR creation with approvals</td>
</tr>
<tr>
<td><strong>Research tasks</strong></td>
<td>Gather information from multiple sources, synthesize findings</td>
</tr>
<tr>
<td><strong>Migration projects</strong></td>
<td>Analyze scope, plan phases, execute with checkpoints</td>
</tr>
</tbody>
</table>
<h3 id="when-not-to-use">When Not to Use<a class="headerlink" href="#when-not-to-use" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Simple, single-step tasks</strong>: Direct agent invocation is simpler</li>
<li><strong>Highly interactive work</strong>: Recipes are for autonomous execution</li>
<li><strong>Unpredictable workflows</strong>: If you can't define steps upfront, use agents directly</li>
</ul>
<h2 id="recipe-anatomy">Recipe Anatomy<a class="headerlink" href="#recipe-anatomy" title="Permanent link">&para;</a></h2>
<h3 id="basic-structure-flat-recipe">Basic Structure (Flat Recipe)<a class="headerlink" href="#basic-structure-flat-recipe" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code-review</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Review code for quality and security issues</span>

<span class="c1"># Input parameters</span>
<span class="nt">inputs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">file_path</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Path to the file to review</span>

<span class="c1"># Sequential steps</span>
<span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">analyze</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:zen-architect</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">Analyze the code structure in {{ file_path }}.</span>
<span class="w">      </span><span class="no">Identify complexity issues and improvement opportunities.</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">security</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:security-guardian</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">Review {{ file_path }} for security vulnerabilities.</span>
<span class="w">      </span><span class="no">Check for OWASP Top 10 issues.</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">summarize</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:file-ops</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">Create a review summary combining:</span>
<span class="w">      </span><span class="no">- Analysis findings: {{ steps.analyze.result }}</span>
<span class="w">      </span><span class="no">- Security findings: {{ steps.security.result }}</span>
</code></pre></div>

<h3 id="staged-recipe-with-approval-gates">Staged Recipe (With Approval Gates)<a class="headerlink" href="#staged-recipe-with-approval-gates" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">release-process</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Coordinated release with human approval gates</span>

<span class="nt">inputs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">version</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">stages</span><span class="p">:</span>
<span class="w">  </span><span class="nt">planning</span><span class="p">:</span>
<span class="w">    </span><span class="nt">approval_required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">changelog</span>
<span class="w">        </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:explorer</span>
<span class="w">        </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">Gather all changes since last release.</span>
<span class="w">          </span><span class="no">Draft changelog for version {{ version }}.</span>

<span class="w">  </span><span class="nt">implementation</span><span class="p">:</span>
<span class="w">    </span><span class="nt">approval_required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">version_bump</span>
<span class="w">        </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:file-ops</span>
<span class="w">        </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">Update version to {{ version }} in package files.</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create_pr</span>
<span class="w">        </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:git-ops</span>
<span class="w">        </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">Create release PR with changelog from planning stage.</span>
</code></pre></div>

<h2 id="key-concepts">Key Concepts<a class="headerlink" href="#key-concepts" title="Permanent link">&para;</a></h2>
<h3 id="context-and-variable-interpolation">Context and Variable Interpolation<a class="headerlink" href="#context-and-variable-interpolation" title="Permanent link">&para;</a></h3>
<p>Recipes support Jinja2-style templating for dynamic values:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Input variables</span>
<span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Review</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">file_path</span><span class="nv"> </span><span class="s">}}&quot;</span>

<span class="c1"># Step results</span>
<span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Build</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">analysis:</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">steps.analyze.result</span><span class="nv"> </span><span class="s">}}&quot;</span>

<span class="c1"># Stage results (staged recipes)</span>
<span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Use</span><span class="nv"> </span><span class="s">plan</span><span class="nv"> </span><span class="s">from:</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">stages.planning.result</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>

<h3 id="error-handling">Error Handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h3>
<p>Configure behavior when steps fail:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">risky_operation</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:modular-builder</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Attempt</span><span class="nv"> </span><span class="s">complex</span><span class="nv"> </span><span class="s">refactoring&quot;</span>
<span class="w">    </span><span class="nt">on_error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">continue</span><span class="w">  </span><span class="c1"># Options: fail (default), continue, retry</span>
<span class="w">    </span><span class="nt">retry</span><span class="p">:</span>
<span class="w">      </span><span class="nt">max_attempts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">      </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w">  </span><span class="c1"># seconds</span>
</code></pre></div>

<h3 id="timeouts">Timeouts<a class="headerlink" href="#timeouts" title="Permanent link">&para;</a></h3>
<p>Prevent runaway executions:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">long_running</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:explorer</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Deep</span><span class="nv"> </span><span class="s">codebase</span><span class="nv"> </span><span class="s">analysis&quot;</span>
<span class="w">    </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span><span class="w">  </span><span class="c1"># 5 minutes</span>
</code></pre></div>

<h3 id="foreach-loops">Foreach Loops<a class="headerlink" href="#foreach-loops" title="Permanent link">&para;</a></h3>
<p>Iterate over collections:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">review_files</span>
<span class="w">    </span><span class="nt">foreach</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">input_files</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">current_file</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:zen-architect</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Review</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">current_file</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>

<h3 id="conditional-execution">Conditional Execution<a class="headerlink" href="#conditional-execution" title="Permanent link">&para;</a></h3>
<p>Run steps based on conditions:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deploy</span>
<span class="w">    </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">steps.tests.result.success</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">true</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:integration-specialist</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">staging&quot;</span>
</code></pre></div>

<h2 id="working-with-sessions">Working with Sessions<a class="headerlink" href="#working-with-sessions" title="Permanent link">&para;</a></h2>
<h3 id="session-lifecycle">Session Lifecycle<a class="headerlink" href="#session-lifecycle" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Created</strong>: Recipe parsed and validated</li>
<li><strong>Running</strong>: Steps executing sequentially</li>
<li><strong>Paused</strong>: Waiting for approval (staged recipes)</li>
<li><strong>Completed</strong>: All steps finished successfully</li>
<li><strong>Failed</strong>: Unrecoverable error encountered</li>
</ol>
<h3 id="listing-and-resuming">Listing and Resuming<a class="headerlink" href="#listing-and-resuming" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># In Amplifier, use the recipes tool:</span>

<span class="c1"># List all active sessions</span>
recipes<span class="w"> </span><span class="nv">operation</span><span class="o">=</span>list

<span class="c1"># Resume a specific session</span>
recipes<span class="w"> </span><span class="nv">operation</span><span class="o">=</span>resume<span class="w"> </span><span class="nv">session_id</span><span class="o">=</span>recipe_20251118_143022_a3f2
</code></pre></div>

<h3 id="approval-workflow">Approval Workflow<a class="headerlink" href="#approval-workflow" title="Permanent link">&para;</a></h3>
<p>For staged recipes with <code>approval_required: true</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check pending approvals</span>
recipes<span class="w"> </span><span class="nv">operation</span><span class="o">=</span>approvals

<span class="c1"># Approve a stage to continue</span>
recipes<span class="w"> </span><span class="nv">operation</span><span class="o">=</span>approve<span class="w"> </span><span class="nv">session_id</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="w"> </span><span class="nv">stage_name</span><span class="o">=</span><span class="s2">&quot;planning&quot;</span>

<span class="c1"># Deny with reason (stops execution)</span>
recipes<span class="w"> </span><span class="nv">operation</span><span class="o">=</span>deny<span class="w"> </span><span class="nv">session_id</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="w"> </span><span class="nv">stage_name</span><span class="o">=</span><span class="s2">&quot;planning&quot;</span><span class="w"> </span><span class="nv">reason</span><span class="o">=</span><span class="s2">&quot;needs changes&quot;</span>
</code></pre></div>

<h2 id="try-it-yourself">Try It Yourself<a class="headerlink" href="#try-it-yourself" title="Permanent link">&para;</a></h2>
<h3 id="example-1-simple-code-review-recipe">Example 1: Simple Code Review Recipe<a class="headerlink" href="#example-1-simple-code-review-recipe" title="Permanent link">&para;</a></h3>
<p>Create <code>code-review.yaml</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code-review</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Comprehensive code review workflow</span>

<span class="nt">inputs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">file_path</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">structure</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:zen-architect</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">Review the code structure of {{ file_path }}.</span>
<span class="w">      </span><span class="no">Assess: complexity, readability, adherence to SOLID principles.</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">security</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:security-guardian</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">Security review of {{ file_path }}.</span>
<span class="w">      </span><span class="no">Check for common vulnerabilities.</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">report</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:file-ops</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">Generate a markdown review report combining:</span>

<span class="w">      </span><span class="no">## Structure Review</span>
<span class="w">      </span><span class="no">{{ steps.structure.result }}</span>

<span class="w">      </span><span class="no">## Security Review</span>
<span class="w">      </span><span class="no">{{ steps.security.result }}</span>
</code></pre></div>

<p>Execute it:</p>
<div class="codehilite"><pre><span></span><code>Use the recipes tool to execute code-review.yaml with file_path set to src/auth.py
</code></pre></div>

<h3 id="example-2-research-and-summarize">Example 2: Research and Summarize<a class="headerlink" href="#example-2-research-and-summarize" title="Permanent link">&para;</a></h3>
<p>Create <code>research.yaml</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">topic-research</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Research a topic and produce a summary</span>

<span class="nt">inputs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">topic</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">    </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">depth</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;moderate&quot;</span>

<span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gather</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:web-research</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">Research &quot;{{ topic }}&quot; with {{ depth }} depth.</span>
<span class="w">      </span><span class="no">Find authoritative sources and key information.</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">analyze</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:zen-architect</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">Analyze the research findings:</span>
<span class="w">      </span><span class="no">{{ steps.gather.result }}</span>

<span class="w">      </span><span class="no">Identify key themes, contradictions, and knowledge gaps.</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">synthesize</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:file-ops</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">Create a comprehensive summary document on &quot;{{ topic }}&quot;:</span>

<span class="w">      </span><span class="no">Research: {{ steps.gather.result }}</span>
<span class="w">      </span><span class="no">Analysis: {{ steps.analyze.result }}</span>
</code></pre></div>

<h3 id="example-3-using-the-recipe-author">Example 3: Using the Recipe Author<a class="headerlink" href="#example-3-using-the-recipe-author" title="Permanent link">&para;</a></h3>
<p>For complex recipes, use the recipe-author agent:</p>
<div class="codehilite"><pre><span></span><code>I need a recipe that:
1. Scans a codebase for TODO comments
2. Categorizes them by priority
3. Creates GitHub issues for high-priority items
4. Requires approval before creating issues
</code></pre></div>

<p>The recipe-author agent will guide you through the design, asking clarifying questions and generating valid YAML.</p>
<h2 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Start simple</strong>: Begin with flat recipes before adding stages</li>
<li><strong>Use meaningful step IDs</strong>: They appear in logs and result references</li>
<li><strong>Provide clear instructions</strong>: Agents work best with specific, detailed prompts</li>
<li><strong>Add approval gates sparingly</strong>: Only where human judgment is truly needed</li>
<li><strong>Test with validate first</strong>: Catch schema errors before execution</li>
<li><strong>Keep steps focused</strong>: One clear objective per step</li>
</ol>
<h2 id="common-patterns">Common Patterns<a class="headerlink" href="#common-patterns" title="Permanent link">&para;</a></h2>
<h3 id="sequential-analysis-pipeline">Sequential Analysis Pipeline<a class="headerlink" href="#sequential-analysis-pipeline" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gather</span><span class="w">    </span><span class="c1"># Collect information</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">analyze</span><span class="w">   </span><span class="c1"># Process findings</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">decide</span><span class="w">    </span><span class="c1"># Make recommendations</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">implement</span><span class="w"> </span><span class="c1"># Execute decisions</span>
</code></pre></div>

<h3 id="fan-outfan-in">Fan-Out/Fan-In<a class="headerlink" href="#fan-outfan-in" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="nt">steps</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">analyze_all</span>
<span class="w">    </span><span class="nt">foreach</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">files</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">as</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file</span>
<span class="w">    </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foundation:explorer</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">combine</span>
<span class="w">    </span><span class="nt">instruction</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Synthesize:</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">steps.analyze_all.results</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>

<h3 id="approval-checkpoint">Approval Checkpoint<a class="headerlink" href="#approval-checkpoint" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="nt">stages</span><span class="p">:</span>
<span class="w">  </span><span class="nt">planning</span><span class="p">:</span>
<span class="w">    </span><span class="nt">approval_required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="nt">execution</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Only runs after planning is approved</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">...</span><span class="p p-Indicator">]</span>
</code></pre></div>

<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Issue</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Recipe won't validate</td>
<td>Check YAML syntax, ensure required fields present</td>
</tr>
<tr>
<td>Step fails immediately</td>
<td>Verify agent name is correct, check instruction format</td>
</tr>
<tr>
<td>Variables not interpolating</td>
<td>Use <code>{{ }}</code> syntax, check step ID references</td>
</tr>
<tr>
<td>Session won't resume</td>
<td>Verify session_id, check if session completed or failed</td>
</tr>
<tr>
<td>Approval stuck</td>
<td>Use <code>recipes operation=approvals</code> to see pending gates</td>
</tr>
</tbody>
</table>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="foundation.html" class="btn btn-neutral float-left" title="Foundation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="lsp-python.html" class="btn btn-neutral float-right" title="LSP Python">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="foundation.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="lsp-python.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
